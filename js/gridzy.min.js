!function(){"use strict";var a,l,d,t,e={animate:!0,layout:"justified",filter:"*",filterControls:"",autoConsiderScrollBars:!0,onBeforeOptionsChanged:function(){},onOptionsChanged:function(){},onBeforeRender:function(){},onRender:function(){},autoInitOnDomReady:!0,autoInitOnDomMutation:!0,autoSyncChildListMutation:!0,useOptionAttributes:!0,autoSyncAttributesMutation:!0,autoSyncChildClassMutation:!0},i={},n=null,o=0,u=null,h={isTruly:function(t){return!!t&&("string"!=typeof t||"false"!==t.toLowerCase())},expectArray:function(t){return h.isArrayLike(t)?t:[t]},isArrayLike:function(t){return t.length===+t.length&&"string"!=typeof t},inArray:function(t,e){return-1!==t.indexOf(e)},objectWalk:function(t,e){var i;if(e(t),"object"==typeof t)for(i in t)h.objectWalk(t[i],e)},objectAssign:function(t){for(var e,i=1;i<arguments.length;i++)for(e in arguments[i])t[e]=arguments[i][e];return t},optionsMerge:function(t,e){var i;for(i in e)void 0!==t[i]&&(t[i]=e[i]);return t},isValidCssSelector:function(t){var e=!1;if("string"==typeof t)try{h.matches(document.body,t),e=!0}catch(t){}return e},matches:Element.prototype.matches?function(t,e){return t.matches(e)}:Element.prototype.msMatchesSelector?function(t,e){return t.msMatchesSelector(e)}:Element.prototype.webkitMatchesSelector?function(t,e){return t.webkitMatchesSelector(e)}:function(t,e){for(var i=(t.document||t.ownerDocument).querySelectorAll(e),n=i.length;0<=--n&&i.item(n)!==t;);return-1<n},changeMultipleClassNames:((t=document.createElement("div").classList).add("a","b"),t.contains("b")?function(t,e,i){t.classList[e?"add":"remove"].apply(t.classList,i)}:function(t,e,i){for(var n=i.length,s=e?"add":"remove",o=n;o--;)t.classList[s](i[n-o-1])}),eventListener:(d=[],{add:function(e,i,n,s,o,r,t){d.push([e,i,n,s,o,r]),n.addEventListener(s,t?function(t){return h.eventListener.remove(e,i,n,s,o,r),o(t)}:o,r)},remove:function(t,e,i,n,s,o){for(var r,a=d.length;a--;)r=d[a],void 0!==t&&t!==r[0]||void 0!==e&&e!==r[1]||void 0!==i&&i!==r[2]||void 0!==n&&n!==r[3]||void 0!==s&&s!==r[4]||void 0!==o&&o!==r[5]||(r[2].removeEventListener(r[3],r[4],r[5]),d.splice(a,1))}}),expectNaturalImageSize:(l=[],function(t,e,i,n){function s(){o.ready=!0,h.eventListener.remove(t,e,o.imgB,"error",r,!1)}var o={img:i,callback:n||function(){},imgB:document.createElement("img"),ready:!1,error:!1},r=function(){o.ready=!0,o.error=!0,h.eventListener.remove(t,e,o.imgB,"load",s,!1)};h.eventListener.add(t,e,o.imgB,"load",s,!1,!0),h.eventListener.add(t,e,o.imgB,"error",r,!1,!0),o.imgB.src=o.img.src,l.push(o),a=a||setInterval(m,0)}),processLazyLoading:function(){if(null!==u){y();for(var t,e,i,n=u.length,s=Math.max(document.documentElement.clientWidth,window.innerWidth||0),o=Math.max(document.documentElement.clientHeight,window.innerHeight||0),r=[];n--;)e=(t=u[n].image.getBoundingClientRect()).right/(s+(t.right-t.left)),i=t.bottom/(o+(t.bottom-t.top)),-.5<e&&e<1.5&&-.5<i&&i<1.5&&r.push(u.splice(n,1)[0]);for(n=0;n<r.length;n++)r[n].item.contentElement.classList.add("gridzyItemLoading"),r[n].src&&(r[n].image.src=r[n].src),r[n].srcset&&(r[n].image.srcset=r[n].srcset)}},registerReadOnlyObjectParameters:function(t,e){var i;for(i in e)Object.defineProperty(t,i,{value:e[i],enumerable:!0})},completeDefaultOptionsObject:function(){n!==Gridzy._defaultOptions.layout&&void 0!==Gridzy._layouts[Gridzy._defaultOptions.layout]&&(Gridzy._defaultOptions=h.optionsMerge(h.cloneDefaultOptionsTemplate(Gridzy._defaultOptions.layout),Gridzy._defaultOptions),n=Gridzy._defaultOptions.layout)},cloneDefaultOptionsTemplate:function(t){return void 0===i[t]&&void 0!==Gridzy._layouts[t]&&(i[t]=h.objectAssign({},Gridzy._layouts[t]._defaultOptions,e)),void 0!==i[t]?h.objectAssign({},i[t]):{}}};function m(){for(var t=0;t<l.length;t++)(l[t].img.naturalWidth&&l[t].img.naturalHeight||l[t].ready)&&(l[t].callback(l[t].img,!l[t].error),l.splice(t,1),t--);l.length||(clearInterval(a),a=null)}var c=!0;function y(){c&&(c=!1,setTimeout(function(){c=!0},0))}var s=new function(){var e=!1,i=new MutationObserver(function(){c&&p()});this.reset=function(){var t=Gridzy._defaultOptions.autoInitOnDomMutation;e!==!!t&&(t?(p(),i.observe(document.body,{attributes:!0,attributeFilter:["class"],subtree:!0,childList:!0})):i.disconnect(),e=!!t)}};function g(t){var e=getComputedStyle(t.element),i={actualBox:null,borderBox:{width:t.element.offsetWidth,height:t.element.offsetHeight},paddingBox:{width:t.element.clientWidth,height:t.element.clientHeight},contentBox:null,border:{top:parseInt(e.borderTopWidth),right:parseInt(e.borderRightWidth),bottom:parseInt(e.borderBottomWidth),left:parseInt(e.borderLeftWidth)},padding:{top:parseInt(e.paddingTop),right:parseInt(e.paddingRight),bottom:parseInt(e.paddingBottom),left:parseInt(e.paddingLeft)}};i.contentBox={width:i.paddingBox.width-i.padding.left-i.padding.right,height:i.paddingBox.height-i.padding.top-i.padding.bottom},i.actualBox="border-box"===e.boxSizing?i.borderBox:i.contentBox,h.registerReadOnlyObjectParameters(this,{gridzyInstance:t,dimensions:i,items:[],layoutStorage:t._layoutStorage}),this.styleToApply="";for(var n=t._allItems.length;n--;)this.items.unshift(new r(t._allItems[n]))}function r(t){h.registerReadOnlyObjectParameters(this,{element:t.contentElement,valid:t.valid,imageError:t.failures,matchFilter:t.matchFilter,width:t.size[0],height:t.size[1],aspectRatio:t.ratio,layoutStorage:t.layoutStorage}),this.visible=t.visible,this.styleToApply=""}function p(){for(var t=document.getElementsByClassName("gridzy"),e=t.length;e--;)void 0===t[e].gridzy&&new Gridzy(t[e])}window.GridzyLayout=function(t){"string"==typeof t.name&&void 0===Gridzy._layouts[t.name]&&(this.name=t.name,this._defaultOptions=t&&"object"==typeof t.options?t.options:{},this._handler=t&&"function"==typeof t.handler?t.handler:function(){},Gridzy._layouts[t.name]=this)},GridzyLayout.prototype={constructor:GridzyLayout,set handler(t){},get handler(){return this._handler}},window.Gridzy=function(t,e){var i,n=void 0===t.gridzy,r=n?this:t.gridzy,s=0;if(e=e||{},r._options=Gridzy.getDefaultOptions(),h.objectAssign({},r._options,e).useOptionAttributes&&(e=h.objectAssign({},r._getOptionParametersFromElement(t),e)),n){for(i in t.gridzy=r,h.registerReadOnlyObjectParameters(r,{element:t,id:++o,version:"2.2.1",_allItems:[],_layoutStorage:{},_filterControls:[],_itemVisibilityClasses:{null_true:{add:["gridzyItemInitialToVisible"],remove:[]},null_false:{add:["gridzyItemHidden"],remove:[]},false_true:{add:["gridzyItemHiddenToVisible"],remove:[]},true_false:{add:["gridzyItemVisibleToHidden"],remove:[]},true_true:{add:["gridzyItemVisibleToVisible"],remove:[]},true:{add:["gridzyItemVisible"],remove:[]},false:{add:["gridzyItemHidden"],remove:[]},null:{add:[],remove:[]}},_itemVisibilityClassesArray:[],_insertQueue:{maxQueueTime:1e3,maxQuietTime:400,items:[],lastProcess:null,timer:null},_elementMutationObserverConfig:{attributes:!1,childList:!1},_elementMutationObserver:new MutationObserver(function(t){var i,n,s,o;c&&(o=s=n=!(i={}),t.forEach(function(t){switch(t.type){case"attributes":var e;"class"===t.attributeName&&r._options.useOptionAttributes?r._options.animate!==t.target.classList.contains("gridzyAnimated")&&void 0===i.animate&&(i.animate=!r._options.animate,n=!0):"style"===t.attributeName?s=!0:0===t.attributeName.indexOf("data-gridzy-")&&r._options.useOptionAttributes&&(e=r._getOptionParametersFromElement(null,null,t.attributeName),i[e.name]=e.value,n=!0);break;case"childList":s=o=!0}}),o&&r._syncElements(),n?r.setOptions(i):s&&r.render())}),_childMutationObserverConfig:{attributes:!1,attributeFilter:["class"]},_childMutationObserver:new MutationObserver(function(t){var e,i;c&&(e=r._options.filter,i=!1,t.forEach(function(t){switch(t.type){case"attributes":void 0!==t.target.gridzyItem&&r._setMatchFilter(t.target.gridzyItem,e)&&(i=!0)}}),i&&r.render())})}),r._itemIdAutoIncrement=0,h.objectWalk(r._itemVisibilityClasses,function(t){"string"==typeof t&&-1===r._itemVisibilityClassesArray.indexOf(t)&&r._itemVisibilityClassesArray.push(t)}),r._itemVisibilityClasses)r._itemVisibilityClasses[i].remove=r._itemVisibilityClassesArray.filter(function(t){return r._itemVisibilityClasses[i].add.indexOf(t)<0});r._updateOptionParameters(e),y(),r.element.setAttribute("data-gridzyid",r.id),r.element.setAttribute("data-gridzyversion",r.version),h.eventListener.add(r,null,r.element,"animationend",function(t){t.target.gridzyItem&&(y(),h.changeMultipleClassNames(t.target,!0,r._itemVisibilityClasses[JSON.stringify(t.target.gridzyItem.visible)].add),h.changeMultipleClassNames(t.target,!1,r._itemVisibilityClasses[JSON.stringify(t.target.gridzyItem.visible)].remove))}),r._syncElements(),s=r.element.clientWidth,h.eventListener.add(r,null,window,"resize",function(){r.element.clientWidth!==s&&(s=r.element.clientWidth,r.render())},!1),h.eventListener.add(r,null,document,"touchstart",function(){},!0)}else r.setOptions(e);return r},Gridzy._layouts={},Gridzy._defaultOptions=h.objectAssign({},e),Gridzy.setDefaultOptions=function(t){void 0!==t.layout&&Gridzy._defaultOptions.layout!==t.layout&&void 0!==Gridzy._layouts[t.layout]&&(Gridzy._defaultOptions.layout=t.layout),h.completeDefaultOptionsObject(),Gridzy._defaultOptions=h.optionsMerge(Gridzy._defaultOptions,t),s.reset()},Gridzy.getDefaultOptions=function(t){return t&&t!==Gridzy._defaultOptions.layout&&"undefiend"!=typeof Gridzy._layouts[t]?h.optionsMerge(h.cloneDefaultOptionsTemplate(t),Gridzy._defaultOptions):(h.completeDefaultOptionsObject(),h.objectAssign({},Gridzy._defaultOptions))},Gridzy.getDefaultOption=function(t){return h.completeDefaultOptionsObject(),void 0!==Gridzy._defaultOptions[t]?Gridzy._defaultOptions[t]:null},Gridzy.prototype={IMG_FAILURE:0,IMG_LOADING:1,IMG_LOADING_READY:2,IMG_READY:3,IMG_FINISHED:4,ITEM_REGISTERED:1,ITEM_INSERT_QUEUE:2,ITEM_INSERTED:3,setOptions:function(t){this._updateOptionParameters(t),this.render(),h.processLazyLoading()},getOptions:function(){return h.objectAssign({},this._options)},getOption:function(t){return void 0!==this._options[t]?this._options[t]:null},syncAttributes:function(){this._options.useOptionAttributes&&this.setOptions(this._getOptionParametersFromElement())},syncChild:function(t){this._syncElements(t),this.render()},syncChildList:function(){this._syncElements(),this.render()},destroy:function(){var t;h.eventListener.remove(this),t=this._allItems.splice(0,this._allItems.length),delete this.element.gridzy,y(),this.element.setAttribute("style","transition: none; animation: none; "),this._resetItemsDOM(t),this.element.removeAttribute("data-gridzyid"),this.element.removeAttribute("data-gridzyversion"),this.element.removeAttribute("style"),document.body.offsetWidth},render:function(){var t,e,i,n=this._getRenderObject(),s=this._options.filter;for(this._options.onBeforeRender(this),y(),t=n.items.length;t--;)(e=n.items[t]).valid&&!e.element.gridzyItem.visible&&(e.element.style.cssText=e.element.style.cssText+"; "+e.styleToApply+"; transition: none; ");for(document.body.offsetWidth,n.gridzyInstance.element.style.cssText=n.gridzyInstance.element.style.cssText+"; "+n.styleToApply,t=n.items.length;t--;)(e=n.items[t]).valid&&(e.element.gridzyItem.visible?e.element.style.cssText=e.element.style.cssText+"; "+e.styleToApply:e.element.style.transition="",(i=this._itemVisibilityClasses[JSON.stringify(e.element.gridzyItem.visible)+"_"+JSON.stringify(e.visible)])&&(h.changeMultipleClassNames(e.element,!0,i.add||[]),h.changeMultipleClassNames(e.element,!1,i.remove||[])),e.element.gridzyItem.visible=e.visible);for(t=n.items.length;t--;)(e=n.items[t]).valid&&(this._setMatchFilter(e.element.gridzyItem,s),"none"===getComputedStyle(e.element).animationName&&(i=this._itemVisibilityClasses[JSON.stringify(e.visible)],h.changeMultipleClassNames(e.element,!0,i.add||[]),h.changeMultipleClassNames(e.element,!1,i.remove||[])));this._options.onRender(this)},_resetElementMutationObserver:function(){var t,e=this._elementMutationObserverConfig,i=!1,n=e.attributes||e.childList;e.attributes!==this._options.autoSyncAttributesMutation&&(e.attributes=!e.attributes,i=!0),e.childList!==this._options.autoSyncChildListMutation&&(e.childList=!e.childList,i=!0),t=e.attributes||e.childList,i&&(n&&this._elementMutationObserver.disconnect(),t&&this._elementMutationObserver.observe(this.element,h.objectAssign({},e)))},_resetChildMutationObserver:function(t){var e,i,n,s,o,r=this._childMutationObserverConfig,a=!1,l=r.attributes,d=!1;if(r.attributes!==this._options.autoSyncChildClassMutation&&(r.attributes=!r.attributes,a=!0),i=r.attributes,(a||t)&&(l&&this._childMutationObserver.disconnect(),i))for(e=h.objectAssign({},r),s=this._options.filter,o=this._allItems.length;o--;)n=this._allItems[o],this._childMutationObserver.observe(n.contentElement,e),this._setMatchFilter(n,s)&&(d=!0);d&&this.render()},_setMatchFilter:function(t,e){if(t.status===this.ITEM_INSERTED){var i=h.matches(t.contentElement,e);if(i!==t.matchFilter)return t.matchFilter=i,!0}return!1},_filterControlEventHandler:function(t){var e,i,n=this._filterControls.length,s=[],o=t.target;for("OPTION"===o.nodeName&&(o=o.parentNode);n--;)if(o===(i=this._filterControls[n]))if("SELECT"===i.nodeName)for(e=i.options.length;e--;)i.options[e].selected&&(s=s.concat(i.options[e].value));else!i.checked&&"checkbox"===i.type||(s=s.concat(i.value));else if(i.checked)"checkbox"===o.type&&"checkbox"===i.type?s=s.concat(i.value):i.checked=!1;else if("SELECT"===i.nodeName)for(e=i.options.length;e--;)i.options[e].selected=!1;this.setOptions({filter:s.join(", ")||":not(*)"})},_getRenderObject:function(){var t,e=this._options.autoConsiderScrollBars,i=new g(this),n=!1,s=i.gridzyInstance.element,o=null,r=null,a=i.gridzyInstance.element.offsetWidth,l=i.gridzyInstance.element.style.position,d=i.gridzyInstance.element.style.cssText,u=!1;if(this._prepareRenderObject(i),e){for(;s.parentNode&&"#document"!==s.parentNode.nodeName;)if(s=s.parentNode,"auto"===(o=getComputedStyle(s).overflowY)||"BODY"===s.nodeName&&"visible"===o){u=!0,(r="BODY"===s.nodeName?Math.max(document.documentElement.clientHeight,window.innerHeight||0):s.offsetHeight)<i.gridzyInstance.element.offsetHeight&&r<(t=(t=i.styleToApply.match(/height:\s*([0-9]+)px;/))?parseInt(t[1]):null)&&(u=!1);break}u&&(i.gridzyInstance.element.style.cssText=d+"; "+i.styleToApply+"; transition: none; animation: none; overflow: hidden; ",a!==i.gridzyInstance.element.offsetWidth&&(i.gridzyInstance.element.style.position=l,i=new g(this),n=!0),i.gridzyInstance.element.style.cssText=d+"; transition: none; animation: none; ",document.body.offsetWidth,i.gridzyInstance.element.style.cssText=d,document.body.offsetWidth,n&&this._prepareRenderObject(i))}return i},_prepareRenderObject:function(t){Gridzy._layouts[this._options.layout].handler(t),this.element.children.length&&this.element.children[0].offsetParent!==this.element&&(t.styleToApply+="; position: relative; "),"block"!==this.element.style.display&&(t.styleToApply+="; display: block; ")},_syncElements:function(t){for(var e,i=this.element.children,n=this.getOption("filter"),s=this._allItems.length=0;s<i.length;s++)e=!1,void 0!==i[s].gridzyItem?e=i[s].gridzyItem:void 0!==t&&t!==i[s]||(e=this._createItem(i[s])),e&&(this._setMatchFilter(e,n),this._allItems.push(e));this._resetChildMutationObserver(!0)},_resetItemsDOM:function(t){var e,i;for(y(),e=t.length;e--;)(i=t[e]).contentElement.setAttribute("style","transition: none; animation: none; ");for(document.body.offsetWidth,e=t.length;e--;)delete(i=t[e]).contentElement.gridzyItem,h.changeMultipleClassNames(i.contentElement,!1,this._itemVisibilityClassesArray.concat(["gridzyItem","gridzyItemLoading","gridzyItemInitializing","gridzyItemReady","gridzyItemComplete"])),""===i.contentElement.className&&i.contentElement.removeAttribute("class"),i.contentElement.removeAttribute("style"),i.contentElement.removeAttribute("data-gridzyitemid")},_createItem:function(t){0===this._insertQueue.items.length&&(this._insertQueue.lastProcess=(new Date).getTime()),y(),h.changeMultipleClassNames(t,!1,this._itemVisibilityClassesArray.concat(["gridzyItem","gridzyItemLoading","gridzyItemInitializing","gridzyItemReady","gridzyItemComplete"]));var o={id:++this._itemIdAutoIncrement,contentElement:t,size:[0,0],ratio:0,failures:!1,status:this.ITEM_REGISTERED,images:[],imagesStatus:[],imagesInfo:[],matchFilter:null,layoutStorage:{},visible:null,destroy:function(){h.eventListener.remove(this,o),this._allItems.splice(this._allItems.indexOf(o),1),this._resetItemsDOM([o]),document.body.offsetWidth}.bind(this)};(t.gridzyItem=o).contentElement.setAttribute("data-gridzyitemid",o.id),o.contentElement.style.visibility="hidden",o.contentElement.style.position="absolute",h.changeMultipleClassNames(o.contentElement,!0,["gridzyItem","gridzyItemLoading","gridzyItemInitializing"]);for(var e="IMG"===t.nodeName?[t]:t.querySelectorAll("img"),i=e.length;i--;)(function(t){o.images.push(t);var e=t.getAttribute("width"),i=t.getAttribute("height"),n=t.getAttribute("data-gridzylazysrc"),s=t.getAttribute("data-gridzylazysrcset");t.getAttribute("src")||!n&&!s||(e&&i?t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEHAAEALAAAAAABAAEAAAICTAEAOw==":(t.src=n,t.srcset=s,s=n=null)),o.imagesInfo.push({styleWidth:t.style.width,styleHeight:t.style.height,attributeWidth:e,attributeHeight:i,lazySrc:n,lazySrcset:s}),null!==e&&null!==i&&0<parseInt(e)&&0<parseInt(i)?o.imagesStatus.push(this.IMG_LOADING_READY):o.imagesStatus.push(this.IMG_LOADING)}).bind(this)(e[i]);return document.body.offsetWidth,o.images.forEach(function(i,n){var t=function(){o.imagesStatus[n]=i.naturalWidth?this.IMG_FINISHED:this.IMG_FAILURE,this._onImageFinished(o),h.eventListener.remove(this,o,i,"error",e,!1)}.bind(this),e=function(){o.imagesStatus[n]=this.IMG_FAILURE,this._onImageFinished(o),h.eventListener.remove(this,o,i,"load",t,!1)}.bind(this);h.eventListener.add(this,o,i,"load",t,!1,!0),h.eventListener.add(this,o,i,"error",e,!1,!0),i.complete&&t(),o.imagesInfo[n].lazySrc||o.imagesInfo[n].lazySrcset||h.expectNaturalImageSize(this,o,i,function(t,e){o.imagesStatus[n]=e&&i.naturalWidth?i.complete?this.IMG_FINISHED:this.IMG_READY:this.IMG_FAILURE,this._onImageReady(o)}.bind(this))}.bind(this)),this._onImageReady(o),this._onImageFinished(o),o},_processInsertQueue:function(t){var e,i,n,s,o,r,a=this._insertQueue.lastProcess<(new Date).getTime()-this._insertQueue.maxQueueTime,l=[],d=[],u=this._options.filter,h=[];if(null!==this._insertQueue.timer&&(clearTimeout(this._insertQueue.timer),this._insertQueue.timer=null),t||a){for(y(),e=this._insertQueue.items.shift();e;)d.push(e),e=this._insertQueue.items.shift();for(r=d.length;r--;)for(s=(e=d[r]).item.images.length;s--;)!(n=e.item.imagesInfo[s]).attributeWidth&&e.item.images[s].offsetWidth<40&&e.item.images[s].naturalWidth&&(n.attributeWidth=e.item.images[s].naturalWidth),!n.attributeHeight&&e.item.images[s].offsetHeight<40&&e.item.images[s].naturalHeight&&(n.attributeHeight=e.item.images[s].naturalHeight),(n.attributeWidth||n.attributeHeight)&&(o=getComputedStyle(e.item.images[s]),(parseInt(o.width)<40||"auto"===o.width||n.lazySrc||n.lazySrcset)&&n.attributeWidth&&!n.styleWidth&&l.push({image:e.item.images[s],definition:"width",value:n.attributeWidth+"px"}),(parseInt(o.height)<40||"auto"===o.height||n.lazySrc||n.lazySrcset)&&n.attributeHeight&&!n.styleHeight&&l.push({image:e.item.images[s],definition:"height",value:n.attributeHeight+"px"})),(n.lazySrc||n.lazySrcset)&&h.push({item:e.item,image:e.item.images[s],src:n.lazySrc,srcset:n.lazySrcset});for(i=l.length;i--;)l[i].image.style[l[i].definition]=l[i].value,l[i].image.style.display="none";for(document.body.offsetWidth,i=l.length;i--;)l[i].image.style.display="";for(r=d.length;r--;)(e=d[r]).item.size=[e.contentElement.offsetWidth,e.contentElement.offsetHeight],e.item.ratio=e.item.size[0]/e.item.size[1];for(i=l.length;i--;)l[i].image.style[l[i].definition]="";for(r=d.length;r--;)(e=d[r]).item.status=this.ITEM_INSERTED,e.item.valid=!(!e.item.size[0]||!e.item.size[1]),this._setMatchFilter(e.item,u),e.item.contentElement.classList.remove("gridzyItemInitializing"),e.item.contentElement.classList.add("gridzyItemReady");for(this.render(),r=d.length;r--;)(e=d[r]).item.contentElement.style.visibility="";h.length&&this._addImagesToLazyLoadQueue(h),this._insertQueue.lastProcess=(new Date).getTime()}else this._insertQueue.timer=setTimeout(function(){this._processInsertQueue(!0)}.bind(this),this._insertQueue.maxQuietTime)},_addImagesToLazyLoadQueue:function(t){null===u&&t.length&&(u=[],h.eventListener.add(this,null,window,"resize",h.processLazyLoading,!1),h.eventListener.add(this,null,window,"scroll",h.processLazyLoading,!0)),u=u.concat(t),h.processLazyLoading()},_addToInsertQueue:function(t,e){this._insertQueue.items.push({contentElement:t,item:e}),this._processInsertQueue(!1)},_onImageFinished:function(t){var e=t.failures;h.inArray(t.imagesStatus,this.IMG_LOADING)||h.inArray(t.imagesStatus,this.IMG_LOADING_READY)||h.inArray(t.imagesStatus,this.IMG_READY)||(y(),h.inArray(t.imagesStatus,this.IMG_FAILURE)&&(t.failures=!0),t.status===this.ITEM_INSERTED&&e!==t.failures&&this.render(),t.contentElement.classList.remove("gridzyItemLoading"),t.contentElement.classList.add("gridzyItemComplete"))},_onImageReady:function(t){var e=t.failures;t.failures=h.inArray(t.imagesStatus,this.IMG_FAILURE),t.status===this.ITEM_INSERTED&&e!==t.failures&&this.render(),t.status!==this.ITEM_REGISTERED||h.inArray(t.imagesStatus,this.IMG_LOADING)||(t.status=this.ITEM_INSERT_QUEUE,this._addToInsertQueue(t.contentElement,t))},_getOptionParametersFromElement:function(t,e,i){var n,s,o,r,a={},l={};for(s in t=t||this.element,e=e||t.getAttribute("data-gridzy-layout")||this._options.layout,o=t.attributes,n=Gridzy.getDefaultOptions(e))a[s.toLowerCase()]={name:s,value:n[s]};if(i)void 0!==a[s=i.substr(12).toLowerCase()]&&(l.name=a[s].name,l.value=void 0!==o[i]?o[i].value:null);else for(t.classList.contains("gridzyAnimated")&&(l.animate=!0),r=o.length;r--;)"data-gridzy-"===o[r].name.substr(0,12)&&void 0!==a[s=o[r].name.substr(12).toLowerCase()]&&(l[a[s].name]=o[r].value);return l},_updateOptionParameters:function(t){var e,i,n,s,o,r,a,l,d=!1;if(t=t||{},this._options.onBeforeOptionsChanged(this),i=h.objectAssign({},this._options),"object"==typeof t.layout&&null===t.layout&&this._options.layout!==Gridzy._defaultOptions.layout&&(this._options.layout=Gridzy._defaultOptions.layout,d=!0),"string"==typeof t.layout&&"object"==typeof Gridzy._layouts[t.layout]&&Gridzy._layouts[t.layout].constructor===GridzyLayout&&this._options.layout!==t.layout&&(this._options.layout=t.layout,d=!0),n=Gridzy.getDefaultOptions(this._options.layout),d){for(e in this._options)void 0===n[e]&&delete this._options[e];for(e in n)void 0===this._options[e]&&(this._options[e]=n[e]);if(this._options.useOptionAttributes)for(e in s=this._getOptionParametersFromElement(null,this._options.layout))void 0!==n[e]&&void 0===t[e]&&this._options[e]!==s[e]&&(t[e]=s[e])}for(e in n)if(void 0!==t[e]&&null!==t[e])switch(typeof n[e]){case"boolean":this._options[e]=h.isTruly(t[e]);break;case"number":this._options[e]=+t[e];break;default:this._options[e]=t[e]}for(e in"string"==typeof t.filter&&this._options.filter!==t.filter&&h.isValidCssSelector(t.filter)&&(this._options.filter=t.filter),"string"!=typeof t.filterControls||""!==t.filterControls&&!h.isValidCssSelector(t.filterControls)||(this._options.filterControls=t.filterControls),void 0!==t.animate&&null!==t.animate&&(this._options.animate=h.isTruly(t.animate)),void 0!==t.autoConsiderScrollBars&&null!==t.autoConsiderScrollBars&&(this._options.autoConsiderScrollBars=h.isTruly(t.autoConsiderScrollBars)),"function"==typeof t.onBeforeOptionsChanged&&(this._options.onBeforeOptionsChanged=t.onBeforeOptionsChanged),"function"==typeof t.onOptionsChanged&&(this._options.onOptionsChanged=t.onOptionsChanged),"function"==typeof t.onBeforeRender&&(this._options.onBeforeRender=t.onBeforeRender),"function"==typeof t.onRender&&(this._options.onRender=t.onRender),void 0!==t.autoSyncChildListMutation&&null!==t.autoSyncChildListMutation&&(this._options.autoSyncChildListMutation=h.isTruly(t.autoSyncChildListMutation)),void 0!==t.autoSyncAttributesMutation&&null!==t.autoSyncAttributesMutation&&(this._options.autoSyncAttributesMutation=h.isTruly(t.autoSyncAttributesMutation)),void 0!==t.autoSyncChildClassMutation&&null!==t.autoSyncChildClassMutation&&(this._options.autoSyncChildClassMutation=h.isTruly(t.autoSyncChildClassMutation)),t)null===t[e]&&void 0!==n[e]&&(this._options[e]=n[e]);if(i.filter!==this._options.filter)for(o=this._allItems.length;o--;)this._setMatchFilter(this._allItems[o],this._options.filter);if(i.filterControls!==this._options.filterControls||this._options.filterControls&&0===this._filterControls.length){for(a=[].slice.call(this._options.filterControls?document.querySelectorAll(this._options.filterControls):[]),o=this._filterControls.length;o--;)if(!h.inArray(a,this._filterControls[o])){switch(this._filterControls[o].nodeName+this._filterControls[o].type){case"SELECT":case"INPUTcheckbox":case"INPUTradio":h.eventListener.remove(this,null,this._filterControls[o],"change",this._filterControls[o].gridzyFilterControlHandler);break;case"INPUTbutton":case"INPUTsubmit":case"BUTTONbutton":case"BUTTONsubmit":case"BUTTONreset":h.eventListener.remove(this,null,this._filterControls[o],"click",this._filterControls[o].gridzyFilterControlHandler);break;default:h.eventListener.remove(this,null,this._filterControls[o],"input",this._filterControls[o].gridzyFilterControlHandler)}this._filterControls.splice(o,1)}for(o=a.length;o--;)if(!h.inArray(this._filterControls,a[o])){switch(a[o].gridzyFilterControlHandler=this._filterControlEventHandler.bind(this),a[o].nodeName+a[o].type){case"SELECT":case"INPUTcheckbox":case"INPUTradio":h.eventListener.add(this,null,a[o],"change",a[o].gridzyFilterControlHandler);break;case"INPUTbutton":case"INPUTsubmit":case"BUTTONbutton":case"BUTTONsubmit":case"BUTTONreset":h.eventListener.add(this,null,a[o],"click",a[o].gridzyFilterControlHandler);break;default:h.eventListener.add(this,null,a[o],"input",a[o].gridzyFilterControlHandler)}this._filterControls.push(a[o])}}if(y(),this._resetElementMutationObserver(),this.element.classList[this._options.animate?"add":"remove"]("gridzyAnimated"),this._options.useOptionAttributes)for(e in this._options)if(l="data-gridzy-"+e.toLowerCase(),r=this._options[e],void 0!==t[e]&&null===t[e]&&this.element.hasAttribute(l))this.element.removeAttribute(l);else if(n[e]!==this._options[e]||this.element.hasAttribute(l)){switch(typeof r){case"boolean":r=r?"true":"false";break;case"number":r+=""}"string"==typeof r&&this.element.setAttribute(l,r)}this._resetChildMutationObserver(),this._options.onOptionsChanged(this)}},h.eventListener.add(null,null,document,"DOMContentLoaded",function(){Gridzy._defaultOptions.autoInitOnDomReady&&p(),s.reset()},!1,!0),"undefined"!=typeof jQuery&&void 0!==jQuery.fn&&(jQuery.fn.gridzy=function(t){return this.each(function(){jQuery(this).data("gridzy",new Gridzy(this,t))})})}(),new GridzyLayout({name:"justified",options:{autoFontSize:!1,desiredHeight:190,hideOnMissingImage:!0,spaceBetween:4,fillLastRow:!0,fillSingleRow:!0},handler:function(t){for(var e,i,n,s,o,r,a,l,d,u,h=!!t.gridzyInstance.getOption("autoFontSize"),m=parseInt(t.gridzyInstance.getOption("desiredHeight")),c=!!t.gridzyInstance.getOption("hideOnMissingImage"),y=parseInt(t.gridzyInstance.getOption("spaceBetween")),g=!!t.gridzyInstance.getOption("fillLastRow"),p=!!t.gridzyInstance.getOption("fillSingleRow"),f=t.items,_=[],b=[],v=t.dimensions.contentBox.width,I=0,z=0,O=[],A=0,C=0,S=f.length;S--;)!(n=f[S]).valid||!n.matchFilter||c&&n.imageError?b.unshift(n):(_.unshift(n),n.optWidth=m*n.width/n.height,I+=n.optWidth);for(i=_.length,s=g?I/(Math.round((I+y*i)/(v+y))||1):v,S=i;S--;)n=_[i-1-S],(void 0===r||z+n.optWidth/2>s*O.length)&&O.push(r={displaySizeY:0,displayPosY:0,ratioAll:0,optWidth:0,items:[]}),z+=n.optWidth,r.optWidth+=n.optWidth,r.ratioAll+=n.aspectRatio,r.items.push(n);for(t.height=0,o=O.length,l=null,S=0;S<o;S++){for(C=A=0,d=v-((a=(r=O[S]).items.length)-1)*y,u=1===o&&p||1<o&&g||S<o-1||r.optWidth>=d,e=0;e<a;e++)(n=r.items[e]).displayPosX=A+e*y,n.displaySizeX=u?Math.round(n.aspectRatio/r.ratioAll*d):Math.round(n.optWidth),A+=n.displaySizeX,u&&e===a-1&&A!==d&&(n.displaySizeX+=d-A),C+=n.displaySizeX/n.aspectRatio;for(r.displaySizeY=Math.round(C/a),r.displayPosY=l?l.displayPosY+l.displaySizeY+y:0,e=0;e<a;e++)(n=r.items[e]).displaySizeY=r.displaySizeY,n.displayPosY=r.displayPosY,n.visible=!0,n.styleToApply="position: absolute; width: "+n.displaySizeX+"px; height: "+n.displaySizeY+"px; left: "+(t.dimensions.padding.left+n.displayPosX)+"px; top: "+(t.dimensions.padding.top+n.displayPosY)+"px; font-size: "+(h?100*n.displaySizeX/n.width+"%":"100%")+"; ";t.height+=r.displaySizeY+(S?y:0),l=r}for(t.styleToApply="height: "+(t.dimensions.actualBox.height-t.dimensions.contentBox.height+t.height)+"px; ",S=b.length;S--;)b[S].visible=!1}}),new GridzyLayout({name:"waterfall",options:{autoFontSize:!1,desiredWidth:250,hideOnMissingImage:!0,horizontalOrder:!1,spaceBetween:4},handler:function(t){for(var e,i,n,s,o,r,a,l=!!t.gridzyInstance.getOption("autoFontSize"),d=parseInt(t.gridzyInstance.getOption("desiredWidth")),u=!!t.gridzyInstance.getOption("hideOnMissingImage"),h=!!t.gridzyInstance.getOption("horizontalOrder"),m=parseInt(t.gridzyInstance.getOption("spaceBetween")),c=0,y=[],g=0,p=t.items,f=[],_=[],b=t.dimensions.contentBox.width,v=p.length;v--;)!(a=p[v]).valid||!a.matchFilter||u&&a.imageError?_.push(a):f.push(a);for(i=b-((e=(r=f.length)<(e=Math.round((b+m)/(d+m))||1)?r:e)-1)*m,v=e;v--;)c+=n=i-Math.round(i*v/e)-c,y.push({index:y.length,width:n,left:i-c+v*m,height:0});for(v=r;v--;){if(h)s=y[s&&0<s.index?s.index-1:e-1];else for(s=y[o=e-1];o--;)y[o].height<s.height-2&&(s=y[o]);(a=f[v]).displaySizeX=s.width,a.displaySizeY=Math.round(a.displaySizeX/a.width*a.height),a.displayPosX=s.left,a.displayPosY=s.height+(s.height?m:0),s.height+=a.displaySizeY+(s.height?m:0),g<s.height&&(g=s.height),a.visible=!0,a.styleToApply="position: absolute; width: "+a.displaySizeX+"px; height: "+a.displaySizeY+"px; left: "+(t.dimensions.padding.left+a.displayPosX)+"px; top: "+(t.dimensions.padding.top+a.displayPosY)+"px; font-size: "+(l?100*a.displaySizeX/a.width+"%":"100%")+"; "}for(t.styleToApply="height: "+(t.dimensions.actualBox.height-t.dimensions.contentBox.height+g)+"px; ",v=_.length;v--;)_[v].visible=!1}});